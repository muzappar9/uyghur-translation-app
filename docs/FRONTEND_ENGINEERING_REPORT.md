# å‰ç«¯å·¥ç¨‹å®Œå·¥æŠ¥å‘Š

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| **é¡¹ç›®åç§°** | å…¬ç›Šå¤šè¯­è¨€ç¿»è¯‘ç³»ç»Ÿ |
| **æ–‡æ¡£ç±»å‹** | å‰ç«¯å·¥ç¨‹å®Œå·¥æ±‡æŠ¥ |
| **ç‰ˆæœ¬** | v2.0.0 |
| **æ—¥æœŸ** | 2025å¹´12æœˆ7æ—¥ |
| **æ±‡æŠ¥äºº** | å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ |
| **æ¥æ”¶æ–¹** | åç«¯å¼€å‘å›¢é˜Ÿ |

---

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®æ€§è´¨

æœ¬é¡¹ç›®ä¸º**å…¬ç›Šæ€§å¤šè¯­è¨€ç¿»è¯‘å·¥å…·**ï¼Œæ—¨åœ¨ä¸ºå…¨çƒç”¨æˆ·æä¾›å…è´¹ã€å¼€æºã€éšç§ä¿æŠ¤çš„ç¿»è¯‘æœåŠ¡ï¼Œç‰¹åˆ«å…³æ³¨ä¸­å›½å°‘æ•°æ°‘æ—è¯­è¨€æ”¯æŒã€‚

### 1.2 æ”¯æŒçš„è¯­è¨€æ•°é‡

| ç±»åˆ« | æ•°é‡ | è¯´æ˜ |
|------|------|------|
| æ€»è¯­è¨€æ•° | **38ç§** | åŸºäºHunyuan-MT-7Bæ¨¡å‹ |
| ä¸­å›½å°‘æ•°æ°‘æ—è¯­è¨€ | 5ç§ | ç»´å¾å°”è¯­ã€è—è¯­ã€è’™å¤è¯­ã€å“ˆè¨å…‹è¯­ã€ç²¤è¯­ |
| RTLè¯­è¨€ | 5ç§ | ç»´å¾å°”è¯­ã€é˜¿æ‹‰ä¼¯è¯­ã€æ³¢æ–¯è¯­ã€å¸Œä¼¯æ¥è¯­ã€ä¹Œå°”éƒ½è¯­ |
| ç¿»è¯‘æ–¹å‘ | åŒå‘äº’è¯‘ | ä»»æ„ä¸¤ç§è¯­è¨€ä¹‹é—´å‡å¯ç¿»è¯‘ |

### 1.3 æ”¯æŒçš„è¾“å…¥æ–¹å¼

| è¾“å…¥æ–¹å¼ | å‰ç«¯çŠ¶æ€ | å¯¹åº”åç«¯æ¨¡å— |
|----------|----------|--------------|
| æ–‡æœ¬è¾“å…¥ | âœ… å·²å®Œæˆ | MTï¼ˆæœºå™¨ç¿»è¯‘ï¼‰ |
| è¯­éŸ³è¾“å…¥ | âœ… å·²å®Œæˆ | ASRï¼ˆè¯­éŸ³è¯†åˆ«ï¼‰ |
| å›¾ç‰‡è¾“å…¥ | âœ… å·²å®Œæˆ | OCRï¼ˆå›¾åƒè¯†åˆ«ï¼‰ |
| è¯­éŸ³æ’­æ”¾ | âœ… å·²å®Œæˆ | TTSï¼ˆè¯­éŸ³åˆæˆï¼‰ |

---

## äºŒã€å‰ç«¯æŠ€æœ¯æ¶æ„

### 2.1 æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯é€‰å‹ | ç‰ˆæœ¬ | ç”¨é€” |
|------|---------|------|------|
| **æ¡†æ¶** | Flutter | 3.x | è·¨å¹³å°UIå¼€å‘ |
| **è¯­è¨€** | Dart | 3.x | ä¸šåŠ¡é€»è¾‘ |
| **çŠ¶æ€ç®¡ç†** | Riverpod | 2.6.1 | å…¨å±€çŠ¶æ€ã€ä¾èµ–æ³¨å…¥ |
| **æœ¬åœ°æ•°æ®åº“** | Isar | 3.1.0 | ç¿»è¯‘å†å²ã€ç¦»çº¿ç¼“å­˜ |
| **è·¯ç”±** | go_router | 13.2.5 | é¡µé¢å¯¼èˆª |
| **HTTPå®¢æˆ·ç«¯** | Dio | 5.4.0 | APIè¯·æ±‚ |
| **æœ¬åœ°å­˜å‚¨** | SharedPreferences | 2.2.2 | ç”¨æˆ·è®¾ç½®æŒä¹…åŒ– |

### 2.2 ä»£ç æ¶æ„

```
lib/
â”œâ”€â”€ main.dart                           # åº”ç”¨å…¥å£
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ translation_api_interface.dart   # APIæŠ½è±¡æ¥å£
â”‚   â”‚   â”œâ”€â”€ translation_api_factory.dart     # APIå·¥å‚
â”‚   â”‚   â””â”€â”€ providers/
â”‚   â”‚       â”œâ”€â”€ self_hosted_translation_api.dart  # è‡ªæ‰˜ç®¡APIå®ç°
â”‚   â”‚       â””â”€â”€ mock_translation_api.dart         # æµ‹è¯•ç”¨Mock
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ env_config.dart             # ç¯å¢ƒé…ç½®
â”‚   â”‚   â””â”€â”€ api_keys.dart               # APIå¯†é’¥ç®¡ç†
â”‚   â”œâ”€â”€ fonts/
â”‚   â”‚   â”œâ”€â”€ font_config.dart            # å­—ä½“é…ç½®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ font_config_provider.dart   # å­—ä½“çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ i18n/
â”‚   â”‚   â”œâ”€â”€ language_config.dart        # 38ç§è¯­è¨€é…ç½®
â”‚   â”‚   â”œâ”€â”€ font_download_manager.dart  # å­—ä½“ä¸‹è½½ç®¡ç†
â”‚   â”‚   â””â”€â”€ safe_text_renderer.dart     # å®‰å…¨æ–‡æœ¬æ¸²æŸ“
â”‚   â”œâ”€â”€ network/
â”‚   â”‚   â”œâ”€â”€ connectivity_service.dart   # ç½‘ç»œçŠ¶æ€æ£€æµ‹
â”‚   â”‚   â””â”€â”€ offline_mode_service.dart   # ç¦»çº¿æ¨¡å¼
â”‚   â””â”€â”€ sync/
â”‚       â””â”€â”€ sync_service.dart           # æ•°æ®åŒæ­¥
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ translation/                    # ç¿»è¯‘åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ dictionary/                     # è¯å…¸åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ ocr/                           # OCRåŠŸèƒ½æ¨¡å—
â”‚   â””â”€â”€ auth/                          # ç”¨æˆ·è®¤è¯æ¨¡å—
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ translation_service.dart    # ç¿»è¯‘æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ voice/                      # è¯­éŸ³æœåŠ¡
â”‚   â”‚   â””â”€â”€ ocr/                        # OCRæœåŠ¡
â”‚   â””â”€â”€ data/
â”‚       â””â”€â”€ models/                     # æ•°æ®æ¨¡å‹
â”œâ”€â”€ widgets/
â”‚   â”œâ”€â”€ font_selector.dart              # å­—ä½“é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ translation_text_card.dart      # ç¿»è¯‘ç»“æœå¡ç‰‡ï¼ˆé›†æˆSafeTextï¼‰
â”‚   â”œâ”€â”€ language_selector.dart          # 38è¯­è¨€é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ glass_card.dart                 # ç»ç’ƒæ€å¡ç‰‡
â”‚   â”œâ”€â”€ chat_bubble.dart                # å¯¹è¯æ°”æ³¡
â”‚   â””â”€â”€ ...                             # å…¶ä»–UIç»„ä»¶
â”œâ”€â”€ screens/                            # 13ä¸ªé¡µé¢
â”‚   â”œâ”€â”€ home_screen.dart
â”‚   â”œâ”€â”€ conversation_screen.dart
â”‚   â”œâ”€â”€ translate_result_screen.dart
â”‚   â”œâ”€â”€ voice_input_screen.dart
â”‚   â”œâ”€â”€ camera_screen.dart
â”‚   â”œâ”€â”€ ocr_result_screen.dart
â”‚   â”œâ”€â”€ history_screen.dart
â”‚   â”œâ”€â”€ settings_screen.dart
â”‚   â””â”€â”€ ...
â””â”€â”€ i18n/
    â””â”€â”€ localizations.dart              # 220+ å›½é™…åŒ–é”®å€¼
```

### 2.3 è®¾è®¡æ¨¡å¼

| æ¨¡å¼ | åº”ç”¨åœºæ™¯ |
|------|----------|
| **Repository Pattern** | æ•°æ®è®¿é—®å±‚æŠ½è±¡ |
| **Factory Pattern** | APIå®ä¾‹åˆ›å»º |
| **Provider Pattern** | çŠ¶æ€ç®¡ç†ä¸ä¾èµ–æ³¨å…¥ |
| **Strategy Pattern** | å¤šç¿»è¯‘å¼•æ“åˆ‡æ¢ |
| **Observer Pattern** | å“åº”å¼UIæ›´æ–° |

---

## ä¸‰ã€å·²å®ç°åŠŸèƒ½æ¸…å•

### 3.1 ç”¨æˆ·ç•Œé¢ (13ä¸ªé¡µé¢)

| é¡µé¢ | æ–‡ä»¶ | åŠŸèƒ½æè¿° | çŠ¶æ€ |
|------|------|----------|------|
| å¯åŠ¨é¡µ | `splash_screen.dart` | åº”ç”¨åŠ è½½ã€åˆå§‹åŒ– | âœ… |
| å¼•å¯¼é¡µ | `onboarding_screen.dart` | æ–°ç”¨æˆ·å¼•å¯¼ | âœ… |
| é¦–é¡µ | `home_screen.dart` | åŠŸèƒ½å…¥å£ã€å¿«æ·æ“ä½œ | âœ… |
| ç¿»è¯‘ç»“æœ | `translate_result_screen.dart` | æ˜¾ç¤ºç¿»è¯‘ç»“æœ | âœ… |
| å¯¹è¯æ¨¡å¼ | `conversation_screen.dart` | å®æ—¶å¯¹è¯ç¿»è¯‘ | âœ… |
| è¯­éŸ³è¾“å…¥ | `voice_input_screen.dart` | è¯­éŸ³å½•åˆ¶ã€è¯†åˆ« | âœ… |
| ç›¸æœºæ‹ç…§ | `camera_screen.dart` | OCRå›¾ç‰‡é‡‡é›† | âœ… |
| OCRç»“æœ | `ocr_result_screen.dart` | å›¾ç‰‡è¯†åˆ«ç»“æœ | âœ… |
| è¯å…¸é¦–é¡µ | `dictionary_home_screen.dart` | è¯æ±‡æŸ¥è¯¢ | âœ… |
| è¯å…¸è¯¦æƒ… | `dictionary_detail_screen.dart` | è¯æ±‡è¯¦ç»†é‡Šä¹‰ | âœ… |
| å†å²è®°å½• | `history_screen.dart` | ç¿»è¯‘å†å²ç®¡ç† | âœ… |
| è®¾ç½®é¡µé¢ | `settings_screen.dart` | åº”ç”¨è®¾ç½® | âœ… |
| è¯­è¨€åˆ‡æ¢ | `language_switcher_page.dart` | ç•Œé¢è¯­è¨€åˆ‡æ¢ | âœ… |

### 3.2 å­—ä½“ç³»ç»Ÿ

#### 3.2.1 ç»´å¾å°”è¯­å­—ä½“ (Alkatipç³»åˆ— - 10ç§)

| å­—ä½“åç§° | ä¸­æ–‡å | ç»´å¾å°”è¯­å | æ–‡ä»¶ |
|---------|--------|-----------|------|
| Alkatip | æ ‡å‡†ä½“ | Ø¦Ø§Ù„ÙƒØ§ØªÙ‰Ù¾ Ø¦Ø§Ø³Ø§Ø³Ù‰ | âœ… å·²å®‰è£… |
| AlkatipKona | ç»å…¸ä½“ | Ø¦Ø§Ù„ÙƒØ§ØªÙ‰Ù¾ ÙƒÙˆÙ†Ø§ | âœ… å·²å®‰è£… |
| AlkatipTor | ç²—ä½“ | Ø¦Ø§Ù„ÙƒØ§ØªÙ‰Ù¾ ØªÙˆÙ… | âœ… å·²å®‰è£… |
| AlkatipYumilaq | åœ†æ¶¦ä½“ | Ø¦Ø§Ù„ÙƒØ§ØªÙ‰Ù¾ ÙŠÛ‡Ù…Ù„Ø§Ù‚ | âœ… å·²å®‰è£… |
| AlkatipNazik | ç»†ä½“ | Ø¦Ø§Ù„ÙƒØ§ØªÙ‰Ù¾ Ù†Ø§Ø²Ù‰Ùƒ | âœ… å·²å®‰è£… |
| AlkatipBasma | å°åˆ·ä½“ | Ø¦Ø§Ù„ÙƒØ§ØªÙ‰Ù¾ Ø¨Û•Ø³Ù…Û• | âœ… å·²å®‰è£… |
| AlkatipTarixi | å¤å…¸ä½“ | Ø¦Ø§Ù„ÙƒØ§ØªÙ‰Ù¾ ØªØ§Ø±Ù‰Ø®Ù‰ | âœ… å·²å®‰è£… |
| AlkatipQol | æ‰‹å†™ä½“ | Ø¦Ø§Ù„ÙƒØ§ØªÙ‰Ù¾ Ù‚ÙˆÙ„ | âœ… å·²å®‰è£… |
| AlkatipKompyuter | è®¡ç®—æœºä½“ | Ø¦Ø§Ù„ÙƒØ§ØªÙ‰Ù¾ ÙƒÙˆÙ…Ù¾ÙŠÛ‡ØªÛØ± | âœ… å·²å®‰è£… |
| AlkatipChong | å¤§å­—ä½“ | Ø¦Ø§Ù„ÙƒØ§ØªÙ‰Ù¾ Ú†ÙˆÚ­ | âœ… å·²å®‰è£… |

#### 3.2.2 æ±‰è¯­å­—ä½“ (8ç§)

| å­—ä½“åç§° | è¯´æ˜ | çŠ¶æ€ |
|---------|------|------|
| System | ç³»ç»Ÿé»˜è®¤ | âœ… å†…ç½® |
| SourceHanSansSC | æ€æºé»‘ä½“ | âœ… é…ç½®å®Œæˆ |
| SourceHanSerifSC | æ€æºå®‹ä½“ | âœ… é…ç½®å®Œæˆ |
| ZhanKuKuaiLe | ç«™é…·å¿«ä¹ä½“ | âœ… é…ç½®å®Œæˆ |
| FZKai | æ–¹æ­£æ¥·ä½“ | âœ… é…ç½®å®Œæˆ |
| FZHei | æ–¹æ­£é»‘ä½“ | âœ… é…ç½®å®Œæˆ |
| MicrosoftYaHei | å¾®è½¯é›…é»‘ | âœ… ç³»ç»Ÿå­—ä½“ |
| SimSun | å®‹ä½“ | âœ… ç³»ç»Ÿå­—ä½“ |

#### 3.2.3 å­—ä½“åŠŸèƒ½å®ç°

| åŠŸèƒ½ | å®ç°æ–¹å¼ | çŠ¶æ€ |
|------|----------|------|
| ç”¨æˆ·è‡ªç”±åˆ‡æ¢å­—ä½“ | FontSettingsSheet æ¨¡æ€é¢æ¿ | âœ… |
| å­—ä½“å¤§å°è°ƒèŠ‚ | Slider æ»‘å— (12-32pt) | âœ… |
| è¡Œé«˜è°ƒèŠ‚ | Slider æ»‘å— (1.0-2.5) | âœ… |
| è®¾ç½®æŒä¹…åŒ– | SharedPreferences | âœ… |
| RTLæ–‡æœ¬æ–¹å‘ | TextDirection.rtl | âœ… |
| å¿«é€Ÿå­—ä½“åˆ‡æ¢ | QuickFontSwitcher FAB | âœ… |

#### 3.2.4 å¤šè¯­è¨€å­—ä½“åˆ†ç±»ç³»ç»Ÿ (13ç±»)

| å­—ä½“ç±»åˆ« | é€‚ç”¨è¯­è¨€ | é»˜è®¤åŠ è½½ |
|----------|----------|----------|
| system | en, fr, de, es, pt, it, nl, pl, cs, ru, uk, el, tr, vi, id, ms, tl | âœ… æ˜¯ |
| arabic | ug, ar, fa, he, ur, kk | âœ… æ˜¯ |
| cjk | zh, zh-Hant, ja, ko, yue | âœ… æ˜¯ |
| devanagari | hi, mr | âŒ æŒ‰éœ€ä¸‹è½½ |
| bengali | bn | âŒ æŒ‰éœ€ä¸‹è½½ |
| tamil | ta | âŒ æŒ‰éœ€ä¸‹è½½ |
| telugu | te | âŒ æŒ‰éœ€ä¸‹è½½ |
| gujarati | gu | âŒ æŒ‰éœ€ä¸‹è½½ |
| tibetan | bo | âŒ æŒ‰éœ€ä¸‹è½½ |
| thai | th | âŒ æŒ‰éœ€ä¸‹è½½ |
| khmer | km | âŒ æŒ‰éœ€ä¸‹è½½ |
| burmese | my | âŒ æŒ‰éœ€ä¸‹è½½ |
| mongolian | mn | âŒ æŒ‰éœ€ä¸‹è½½ |

#### 3.2.5 RTLè¯­è¨€æ¸²æŸ“æ”¯æŒ

| åŠŸèƒ½ | å®ç°æ–¹å¼ | çŠ¶æ€ |
|------|----------|------|
| RTLè¯­è¨€æ£€æµ‹ | SupportedLanguages.isRTL() | âœ… |
| è‡ªåŠ¨æ–‡å­—æ–¹å‘ | TextDirection.rtl/ltr | âœ… |
| åŒå‘æ–‡æœ¬éš”ç¦» | Unicode LRI/RLI/FSI/PDI | âœ… |
| æ··åˆæ–‡æœ¬å¤„ç† | BidiText.isolate() | âœ… |
| OpenTypeç‰¹æ€§ | liga, calt, ccmp | âœ… |

### 3.3 çŠ¶æ€ç®¡ç†

| Provider | åŠŸèƒ½ | æŒä¹…åŒ– |
|----------|------|--------|
| `fontConfigProvider` | å­—ä½“é…ç½®çŠ¶æ€ | âœ… SharedPreferences |
| `translationHistoryProvider` | ç¿»è¯‘å†å² | âœ… Isar |
| `networkConnectivityProvider` | ç½‘ç»œçŠ¶æ€ | âŒ å®æ—¶ |
| `userPreferencesProvider` | ç”¨æˆ·è®¾ç½® | âœ… Isar |
| `pendingTranslationProvider` | ç¦»çº¿å¾…åŒæ­¥ | âœ… Isar |

### 3.4 æœ¬åœ°å­˜å‚¨

| æ•°æ®è¡¨ | ç”¨é€” | å­—æ®µæ•° |
|--------|------|--------|
| `TranslationHistory` | ç¿»è¯‘å†å²è®°å½• | 8 |
| `FavoriteItem` | æ”¶è—å¤¹ | 6 |
| `PendingSync` | ç¦»çº¿å¾…åŒæ­¥é˜Ÿåˆ— | 7 |
| `UserPreferences` | ç”¨æˆ·åå¥½è®¾ç½® | 12 |
| `AnalyticsEvent` | ä½¿ç”¨ç»Ÿè®¡ | 5 |

### 3.5 å¤šè¯­è¨€ç¿»è¯‘æ”¯æŒ (38ç§è¯­è¨€)

#### 3.5.1 è¯­è¨€åˆ†ç±»

| åˆ†ç±» | è¯­è¨€ | æ•°é‡ |
|------|------|------|
| å¸¸ç”¨è¯­è¨€ | ç®€ä½“ä¸­æ–‡(zh)ã€ç¹ä½“ä¸­æ–‡(zh-Hant)ã€è‹±è¯­(en) | 3 |
| ä¸­å›½å°‘æ•°æ°‘æ— | ç»´å¾å°”è¯­(ug)ğŸ”ï¸ã€è—è¯­(bo)ã€è’™å¤è¯­(mn)ã€å“ˆè¨å…‹è¯­(kk)ã€ç²¤è¯­(yue) | 5 |
| ä¸œäºšè¯­è¨€ | æ—¥è¯­(ja)ã€éŸ©è¯­(ko) | 2 |
| ä¸œå—äºšè¯­è¨€ | æ³°è¯­(th)ã€è¶Šå—è¯­(vi)ã€å°å°¼è¯­(id)ã€é©¬æ¥è¯­(ms)ã€è²å¾‹å®¾è¯­(tl)ã€é«˜æ£‰è¯­(km)ã€ç¼…ç”¸è¯­(my) | 7 |
| å—äºšè¯­è¨€ | å°åœ°è¯­(hi)ã€å­ŸåŠ æ‹‰è¯­(bn)ã€æ³°ç±³å°”è¯­(ta)ã€æ³°å¢å›ºè¯­(te)ã€é©¬æ‹‰åœ°è¯­(mr)ã€å¤å‰æ‹‰ç‰¹è¯­(gu) | 6 |
| ä¸­ä¸œè¯­è¨€ | é˜¿æ‹‰ä¼¯è¯­(ar)â¬…ï¸ã€æ³¢æ–¯è¯­(fa)â¬…ï¸ã€å¸Œä¼¯æ¥è¯­(he)â¬…ï¸ã€åœŸè€³å…¶è¯­(tr)ã€ä¹Œå°”éƒ½è¯­(ur)â¬…ï¸ | 5 |
| è¥¿æ¬§è¯­è¨€ | æ³•è¯­(fr)ã€å¾·è¯­(de)ã€è¥¿ç­ç‰™è¯­(es)ã€è‘¡è„ç‰™è¯­(pt)ã€æ„å¤§åˆ©è¯­(it)ã€è·å…°è¯­(nl)ã€å¸Œè…Šè¯­(el) | 7 |
| ä¸œæ¬§/æ–¯æ‹‰å¤« | ä¿„è¯­(ru)ã€ä¹Œå…‹å…°è¯­(uk)ã€æ³¢å…°è¯­(pl)ã€æ·å…‹è¯­(cs) | 4 |

> â¬…ï¸ æ ‡è®°è¡¨ç¤ºRTLï¼ˆä»å³åˆ°å·¦ï¼‰è¯­è¨€
> ğŸ”ï¸ æ ‡è®°è¡¨ç¤ºä¸­å›½å°‘æ•°æ°‘æ—è¯­è¨€

#### 3.5.2 ç•Œé¢å›½é™…åŒ–

| è¯­è¨€ | ä»£ç  | çŠ¶æ€ |
|------|------|------|
| ä¸­æ–‡ | zh | âœ… 220+ é”®å€¼ |
| ç»´å¾å°”è¯­ | ug | âœ… 220+ é”®å€¼ |
| è‹±è¯­ | en | â³ é¢„ç•™ |

### 3.6 ç¦»çº¿åŠŸèƒ½

| åŠŸèƒ½ | å®ç°æ–¹å¼ |
|------|----------|
| ç½‘ç»œçŠ¶æ€æ£€æµ‹ | connectivity_plus |
| ç¦»çº¿ç¿»è¯‘é˜Ÿåˆ— | Isar PendingSyncè¡¨ |
| è‡ªåŠ¨é‡è¯• | æŒ‡æ•°é€€é¿ç®—æ³• |
| å†å²ç¼“å­˜ | æœ¬åœ°Isaræ•°æ®åº“ |

---

## å››ã€å‰ç«¯APIè°ƒç”¨è§„èŒƒ

### 4.1 æ¦‚è¿°

å‰ç«¯ä»£ç ä¸­å·²å®ç°å®Œæ•´çš„APIè°ƒç”¨å±‚ï¼Œé‡‡ç”¨**æ¥å£æŠ½è±¡è®¾è®¡**ï¼Œåç«¯åªéœ€å®ç°çº¦å®šçš„æ¥å£æ ¼å¼å³å¯æ— ç¼å¯¹æ¥ã€‚

### 4.2 ç¿»è¯‘æ¥å£

#### è¯·æ±‚æ ¼å¼

```
POST /api/v1/translate
Content-Type: application/json
```

```json
{
  "text": "å¾…ç¿»è¯‘æ–‡æœ¬",
  "source_language": "zh",
  "target_language": "ug"
}
```

#### å“åº”æ ¼å¼

**æˆåŠŸå“åº”ï¼š**
```json
{
  "success": true,
  "data": {
    "translated_text": "ç¿»è¯‘ç»“æœæ–‡æœ¬"
  }
}
```

**å¤±è´¥å“åº”ï¼š**
```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "é”™è¯¯æè¿°"
  }
}
```

#### è¯­è¨€ä»£ç  (æ”¯æŒ38ç§è¯­è¨€äº’è¯‘)

| ä»£ç  | è¯­è¨€ | æ–‡å­—æ–¹å‘ | å­—ä½“ç±»åˆ« |
|------|------|----------|----------|
| `zh` | ç®€ä½“ä¸­æ–‡ | LTR | cjk |
| `zh-Hant` | ç¹ä½“ä¸­æ–‡ | LTR | cjk |
| `en` | è‹±è¯­ | LTR | system |
| `ug` | ç»´å¾å°”è¯­ | **RTL** | arabic |
| `ar` | é˜¿æ‹‰ä¼¯è¯­ | **RTL** | arabic |
| `fa` | æ³¢æ–¯è¯­ | **RTL** | arabic |
| `he` | å¸Œä¼¯æ¥è¯­ | **RTL** | hebrew |
| `ur` | ä¹Œå°”éƒ½è¯­ | **RTL** | arabic |
| `ja` | æ—¥è¯­ | LTR | cjk |
| `ko` | éŸ©è¯­ | LTR | cjk |
| ... | å…¶ä»–28ç§ | LTR | è§å­—ä½“åˆ†ç±»è¡¨ |

> å®Œæ•´38ç§è¯­è¨€åˆ—è¡¨è§ `lib/core/i18n/language_config.dart`

### 4.3 è¯­éŸ³è¯†åˆ«æ¥å£ (ASR)

#### è¯·æ±‚æ ¼å¼

```
POST /api/v1/asr
Content-Type: multipart/form-data
```

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `audio` | file | éŸ³é¢‘æ–‡ä»¶ (WAV/MP3) |
| `language` | string | è¯­è¨€ä»£ç  (ug/zh) |

#### å“åº”æ ¼å¼

```json
{
  "success": true,
  "data": {
    "text": "è¯†åˆ«å‡ºçš„æ–‡æœ¬",
    "confidence": 0.95,
    "language": "ug"
  }
}
```

### 4.4 è¯­éŸ³åˆæˆæ¥å£ (TTS)

#### è¯·æ±‚æ ¼å¼

```
POST /api/v1/tts
Content-Type: application/json
```

```json
{
  "text": "è¦åˆæˆçš„æ–‡æœ¬",
  "language": "ug",
  "voice": "default"
}
```

#### å“åº”æ ¼å¼

```json
{
  "success": true,
  "data": {
    "audio_url": "https://..../audio.mp3",
    "duration_ms": 3500
  }
}
```

æˆ–ç›´æ¥è¿”å›éŸ³é¢‘æµï¼š
```
Content-Type: audio/mpeg
[binary audio data]
```

### 4.5 OCRè¯†åˆ«æ¥å£

#### è¯·æ±‚æ ¼å¼

```
POST /api/v1/ocr
Content-Type: multipart/form-data
```

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `image` | file | å›¾ç‰‡æ–‡ä»¶ (JPEG/PNG) |
| `language` | string | ç›®æ ‡è¯­è¨€ (ug) |

#### å“åº”æ ¼å¼

```json
{
  "success": true,
  "data": {
    "text": "è¯†åˆ«å‡ºçš„æ–‡æœ¬",
    "confidence": 0.92,
    "bounding_boxes": [
      {
        "text": "å•è¯",
        "x": 10,
        "y": 20,
        "width": 100,
        "height": 30
      }
    ]
  }
}
```

### 4.6 å¥åº·æ£€æŸ¥æ¥å£

#### è¯·æ±‚æ ¼å¼

```
GET /api/v1/health
```

#### å“åº”æ ¼å¼

```json
{
  "status": "healthy",
  "services": {
    "mt": "online",
    "asr": "online",
    "tts": "online",
    "ocr": "online"
  }
}
```

### 4.7 é”™è¯¯ä»£ç è¡¨

| é”™è¯¯ä»£ç  | HTTPçŠ¶æ€ç  | è¯´æ˜ |
|----------|-----------|------|
| `EMPTY_TEXT` | 400 | è¾“å…¥æ–‡æœ¬ä¸ºç©º |
| `TEXT_TOO_LONG` | 400 | æ–‡æœ¬è¶…è¿‡é•¿åº¦é™åˆ¶ |
| `INVALID_LANGUAGE` | 400 | ä¸æ”¯æŒçš„è¯­è¨€ä»£ç  |
| `TRANSLATION_FAILED` | 500 | ç¿»è¯‘æœåŠ¡å†…éƒ¨é”™è¯¯ |
| `ASR_FAILED` | 500 | è¯­éŸ³è¯†åˆ«å¤±è´¥ |
| `TTS_FAILED` | 500 | è¯­éŸ³åˆæˆå¤±è´¥ |
| `OCR_FAILED` | 500 | OCRè¯†åˆ«å¤±è´¥ |
| `SERVICE_UNAVAILABLE` | 503 | æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ |

---

## äº”ã€å‰ç«¯ä»£ç ä¸­çš„APIè°ƒç”¨ä½ç½®

### 5.1 æ ¸å¿ƒæ¥å£å®šä¹‰

**æ–‡ä»¶**: `lib/core/api/translation_api_interface.dart`

```dart
/// ç¿»è¯‘APIæŠ½è±¡æ¥å£
abstract class TranslationApiInterface {
  /// ç¿»è¯‘å•ä¸ªæ–‡æœ¬
  Future<TranslationApiResponse> translate({
    required String text,
    required String sourceLanguage,
    required String targetLanguage,
  });

  /// æ‰¹é‡ç¿»è¯‘
  Future<BatchTranslationApiResponse> translateBatch({
    required List<String> texts,
    required String sourceLanguage,
    required String targetLanguage,
  });

  /// æ£€æµ‹è¯­è¨€
  Future<String?> detectLanguage(String text);

  /// å¥åº·æ£€æŸ¥
  Future<bool> isAvailable();
}
```

### 5.2 å“åº”æ•°æ®æ¨¡å‹

**æ–‡ä»¶**: `lib/core/api/translation_api_interface.dart`

```dart
class TranslationApiResponse {
  final bool success;
  final String? translatedText;
  final String? errorMessage;
  final String? errorCode;
  final Map<String, dynamic>? metadata;
}
```

### 5.3 APIå·¥å‚

**æ–‡ä»¶**: `lib/core/api/translation_api_factory.dart`

```dart
enum TranslationApiProvider {
  mock,        // å¼€å‘æµ‹è¯•
  selfHosted,  // è‡ªæ‰˜ç®¡æœåŠ¡
  deepSeek,    // DeepSeek API (æµ‹è¯•ç”¨)
}
```

### 5.4 ç¯å¢ƒé…ç½®

**æ–‡ä»¶**: `.env` (éœ€è¦åç«¯æä¾›å®é™…åœ°å€åé…ç½®)

```env
# åç«¯APIåœ°å€
TRANSLATION_API_URL=http://your-backend-server/api/v1

# è¶…æ—¶é…ç½®
API_TIMEOUT_MS=30000
API_RETRY_COUNT=3
```

---

## å…­ã€å¾…åç«¯å®Œæˆäº‹é¡¹

### 6.1 å¿…é¡»å®ç°çš„æ¥å£

| æ¥å£ | ä¼˜å…ˆçº§ | å¯¹åº”å¼€æºæ¨¡å‹ |
|------|--------|--------------|
| `POST /api/v1/translate` | P0 | **Hunyuan-MT-7B** (36è¯­è¨€äº’è¯‘) |
| `GET /api/v1/health` | P0 | - |
| `GET /api/v1/languages` | P0 | è¿”å›æ”¯æŒçš„è¯­è¨€åˆ—è¡¨ |
| `POST /api/v1/asr` | P1 | uyghur-asr-transformer |
| `POST /api/v1/tts` | P1 | MMS-TTS Uyghur |
| `POST /api/v1/ocr` | P2 | Tesseract + uig.traineddata |

> **Hunyuan-MT-7B**: è…¾è®¯æ··å…ƒæœºå™¨ç¿»è¯‘æ¨¡å‹ï¼Œæ”¯æŒ36ç§è¯­è¨€äº’è¯‘
> - 5ç§ä¸­å›½å°‘æ•°æ°‘æ—è¯­è¨€ï¼šç»´å¾å°”è¯­ã€è—è¯­ã€è’™å¤è¯­ã€å“ˆè¨å…‹è¯­ã€ç²¤è¯­
> - HuggingFace: https://huggingface.co/Tencent-Hunyuan/Hunyuan-MT-7B

### 6.2 å¯é€‰å®ç°çš„æ¥å£

| æ¥å£ | è¯´æ˜ |
|------|------|
| `POST /api/v1/translate/batch` | æ‰¹é‡ç¿»è¯‘ |
| `GET /api/v1/languages` | æ”¯æŒçš„è¯­è¨€åˆ—è¡¨ |
| `POST /api/v1/detect` | è¯­è¨€æ£€æµ‹ |

### 6.3 éƒ¨ç½²è¦æ±‚

| è¦æ±‚ | è¯´æ˜ |
|------|------|
| HTTPS | ç”Ÿäº§ç¯å¢ƒå¿…é¡» |
| CORS | å…è®¸å‰ç«¯è·¨åŸŸè®¿é—® |
| å“åº”æ—¶é—´ | ç¿»è¯‘æ¥å£ < 5ç§’ |
| å¹¶å‘æ”¯æŒ | å»ºè®® >= 100 QPS |

---

## ä¸ƒã€æµ‹è¯•éªŒæ”¶æ ‡å‡†

### 7.1 æ¥å£å¯¹æ¥æµ‹è¯•

| æµ‹è¯•é¡¹ | æ–¹æ³• | é¢„æœŸç»“æœ |
|--------|------|----------|
| ä¸­æ–‡â†’ç»´å¾å°”è¯­ | POST translate | è¿”å›ç»´å¾å°”è¯­æ–‡æœ¬ |
| ç»´å¾å°”è¯­â†’ä¸­æ–‡ | POST translate | è¿”å›ä¸­æ–‡æ–‡æœ¬ |
| ç©ºæ–‡æœ¬å¤„ç† | POST translate (ç©º) | è¿”å› EMPTY_TEXT é”™è¯¯ |
| è¶…é•¿æ–‡æœ¬ | POST translate (5000+å­—ç¬¦) | æ­£å¸¸å¤„ç†æˆ–è¿”å›é”™è¯¯ |
| æœåŠ¡å¥åº·æ£€æŸ¥ | GET health | è¿”å› healthy çŠ¶æ€ |

### 7.2 å‰ç«¯åŠŸèƒ½éªŒæ”¶

| åŠŸèƒ½ | éªŒæ”¶æ ‡å‡† |
|------|----------|
| æ–‡æœ¬ç¿»è¯‘ | è¾“å…¥ä¸­æ–‡ï¼Œæ˜¾ç¤ºç»´å¾å°”è¯­ç»“æœ |
| å­—ä½“åˆ‡æ¢ | åˆ‡æ¢å­—ä½“åæ–‡æœ¬æ­£ç¡®æ¸²æŸ“ |
| å†å²è®°å½• | ç¿»è¯‘ç»“æœè‡ªåŠ¨ä¿å­˜åˆ°å†å² |
| ç¦»çº¿æ¨¡å¼ | ç¦»çº¿æ—¶ä¿å­˜åˆ°å¾…åŒæ­¥é˜Ÿåˆ— |
| RTLæ˜¾ç¤º | ç»´å¾å°”è¯­ä»å³åˆ°å·¦æ­£ç¡®æ˜¾ç¤º |

---

## å…«ã€æ–‡ä»¶äº¤ä»˜æ¸…å•

### 8.1 æºä»£ç 

| ç›®å½• | æ–‡ä»¶æ•° | è¯´æ˜ |
|------|--------|------|
| `lib/` | 202 | Dartæºä»£ç  |
| `assets/fonts/` | 10 | å­—ä½“æ–‡ä»¶ |
| `test/` | 15 | æµ‹è¯•ç”¨ä¾‹ |

### 8.2 æ–‡æ¡£

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `PROJECT_DELIVERY.md` | é¡¹ç›®äº¤ä»˜æ–‡æ¡£ |
| `FRONTEND_ENGINEERING_REPORT.md` | æœ¬æ–‡æ¡£ |
| `FONT_INSTALLATION_GUIDE.md` | å­—ä½“å®‰è£…æŒ‡å— |
| `README.md` | é¡¹ç›®è¯´æ˜ |

### 8.3 é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `pubspec.yaml` | Flutterä¾èµ–é…ç½® |
| `.env.example` | ç¯å¢ƒå˜é‡æ¨¡æ¿ |
| `analysis_options.yaml` | ä»£ç åˆ†æé…ç½® |

---

## ä¹ã€é™„å½•

### 9.1 ä»£ç ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| Dartæ–‡ä»¶æ•° | 210+ |
| æ€»ä»£ç è¡Œæ•° | ~28,000 |
| é¡µé¢æ•°é‡ | 13 |
| UIç»„ä»¶æ•° | 35+ |
| Provideræ•° | 18+ |
| æ•°æ®æ¨¡å‹æ•° | 15 |
| æ”¯æŒè¯­è¨€æ•° | **38** |
| å•å…ƒæµ‹è¯•æ•° | 23+ |

### 9.2 ä¾èµ–åˆ—è¡¨

```yaml
dependencies:
  flutter_riverpod: ^2.6.1
  isar: ^3.1.0
  go_router: ^13.2.5
  dio: ^5.4.0
  shared_preferences: ^2.2.2
  connectivity_plus: ^5.0.2
  speech_to_text: ^6.6.0
  camera: ^0.10.6
  permission_handler: ^11.4.0
  logger: ^2.0.2
```

### 9.3 æ”¯æŒå¹³å°

| å¹³å° | çŠ¶æ€ |
|------|------|
| Android | âœ… å·²é€‚é… |
| iOS | âœ… å·²é€‚é… |
| Windows | âœ… å·²é€‚é… |
| Web | â³ å¾…æµ‹è¯• |

---

## åã€æ€»ç»“

å‰ç«¯å·¥ç¨‹å·²å®Œæˆå…¨éƒ¨UIå¼€å‘ã€çŠ¶æ€ç®¡ç†ã€æœ¬åœ°å­˜å‚¨ã€å­—ä½“ç³»ç»Ÿç­‰å·¥ä½œï¼Œå¹¶æ–°å¢äº†**38ç§è¯­è¨€å…¨é¢æ”¯æŒ**ã€‚

### 10.1 æ ¸å¿ƒèƒ½åŠ›

| èƒ½åŠ› | è¯´æ˜ |
|------|------|
| å¤šè¯­è¨€ç¿»è¯‘ | æ”¯æŒ38ç§è¯­è¨€åŒå‘äº’è¯‘ |
| RTLè¯­è¨€ | 5ç§RTLè¯­è¨€å®Œæ•´æ”¯æŒï¼ˆç»´å¾å°”è¯­ã€é˜¿æ‹‰ä¼¯è¯­ã€æ³¢æ–¯è¯­ã€å¸Œä¼¯æ¥è¯­ã€ä¹Œå°”éƒ½è¯­ï¼‰ |
| å­—ä½“ç³»ç»Ÿ | 13ç±»å­—ä½“ï¼Œé»˜è®¤+æŒ‰éœ€ä¸‹è½½ |
| åŒå‘æ–‡æœ¬ | Unicodeéš”ç¦»æ ‡è®°å¤„ç†æ··åˆæ–‡æœ¬ |
| å°‘æ•°æ°‘æ—è¯­è¨€ | ç‰¹åˆ«æ”¯æŒ5ç§ä¸­å›½å°‘æ•°æ°‘æ—è¯­è¨€ |

### 10.2 è´¨é‡ä¿è¯

| é¡¹ç›® | çŠ¶æ€ |
|------|------|
| ä»£ç åˆ†æ | âœ… æ— é”™è¯¯ |
| å•å…ƒæµ‹è¯• | âœ… 23/23 é€šè¿‡ |
| åŠŸèƒ½å®Œæ•´æ€§ | âœ… å·²éªŒè¯ |

**å‰ç«¯å½“å‰çŠ¶æ€**: âœ… å¼€å‘å®Œæˆï¼Œç­‰å¾…åç«¯APIå¯¹æ¥

---

*æŠ¥å‘Šå®Œæ¯•*

*å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ*  
*2025å¹´12æœˆ7æ—¥*
